#!/usr/bin/expect -f
set addr [lindex $argv 0];
set timeout 10

spawn "bluetoothctl"
expect "#"
send "power on\n"
expect "Changing*"
send "agent on\n"
expect "Agent registered"
send "scan on\n"
expect {
    timeout { send_user "\nDevice NOT available"; exit 1}
    "Device $addr *" 
}
send "scan off\n"
send "pair $addr \n"
expect "Enter PIN code:"
send "1234\n"
expect "Pairing successful"
expect "Device*"
send "quit\n"
expect "Controller*"
